<!doctype html>
<html lang="th">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô - JingJai</title>
        <link
            href="https://fonts.googleapis.com/css2?family=Prompt:wght@200;300;400;500;600&display=swap"
            rel="stylesheet"
        />
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: "Prompt", sans-serif;
                background: linear-gradient(135deg, #BBECFC 0%, #27C2F5 100%);
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
            }

            .feedback-container {
                max-width: 500px;
                width: 100%;
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(20px);
                border-radius: 24px;
                padding: 40px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                text-align: center;
            }

            .header {
                text-align: center;
                margin-bottom: 32px;
            }

            .back-btn {
                position: absolute;
                top: 20px;
                left: 20px;
                background: rgba(255, 255, 255, 0.8);
                border: none;
                border-radius: 50%;
                width: 48px;
                height: 48px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
                backdrop-filter: blur(10px);
            }

            .back-btn:hover {
                background: rgba(255, 255, 255, 0.9);
                transform: scale(1.1);
            }

            h1 {
                font-size: 2rem;
                font-weight: 600;
                background: linear-gradient(135deg, #145690, #145690);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                margin-bottom: 8px;
            }

            .subtitle {
                color: #64748b;
                font-weight: 300;
                font-size: 1rem;
            }

            .rating-section {
                margin-bottom: 24px;
            }

            .section-title {
                font-size: 1.1rem;
                font-weight: 500;
                color: #2d3748;
                margin-bottom: 12px;
            }

            .stars {
                display: flex;
                gap: 8px;
                justify-content: center;
                margin-bottom: 16px;
            }

            .star {
                font-size: 2rem;
                color: #9ca3af;
                cursor: pointer;
                transition: all 0.2s ease;
                user-select: none;
                opacity: 0.25;
            }

            .star:hover,
            .star.active {
                color: #fbbf24;
                transform: scale(1.1);
                opacity: 1;
            }

            .rating-text {
                text-align: center;
                font-size: 0.9rem;
                color: #64748b;
                font-weight: 300;
                min-height: 20px;
            }

            .comment-section {
                margin-bottom: 24px;
            }

            .comment-textarea {
                width: 100%;
                min-height: 120px;
                padding: 16px;
                border: 2px solid #BBECFC;
                border-radius: 16px;
                font-family: "Prompt", sans-serif;
                font-size: 0.95rem;
                font-weight: 300;
                resize: vertical;
                transition: border-color 0.3s ease;
                background: rgba(255, 255, 255, 0.8);
            }

            .comment-textarea:focus {
                outline: none;
                border-color: #145690;
                background: white;
            }

            .comment-textarea::placeholder {
                color: #a0aec0;
            }

            .char-count {
                text-align: right;
                font-size: 0.8rem;
                color: #a0aec0;
                margin-top: 4px;
            }

            .submit-btn {
                width: 100%;
                padding: 16px;
                background: linear-gradient(135deg,#A4E5A5, #A4E5A5);
                color: white;
                border: none;
                border-radius: 16px;
                font-family: "Prompt", sans-serif;
                font-size: 1rem;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
            }

            .submit-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 12px 32px rgba(102, 126, 234, 0.4);
            }

            .submit-btn:disabled {
                background: #BBECFC;
                cursor: not-allowed;
                transform: none;
                box-shadow: none;
            }

            .success-message {
                display: none;
                text-align: center;
                padding: 24px;
                background: rgba(34, 197, 94, 0.1);
                border: 1px solid rgba(34, 197, 94, 0.2);
                border-radius: 16px;
                color: #166534;
                margin-top: 16px;
            }

            .success-message.show {
                display: block;
                animation: slideIn 0.5s ease-out;
            }

            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .emoji {
                font-size: 2rem;
                margin-bottom: 8px;
            }

            @media (max-width: 768px) {
                .feedback-container {
                    padding: 24px;
                    margin: 10px;
                    border-radius: 16px;
                }

                h1 {
                    font-size: 1.6rem;
                }

                .stars {
                    gap: 4px;
                }

                .star {
                    font-size: 1.6rem;
                }
            }
        </style>
    </head>
    <body>
        <button class="back-btn" onclick="window.location.href='index.html'">
            <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
            >
                <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
        </button>

        <div class="feedback-container">
            <div class="header">
                <h1>‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô</h1>
                <p class="subtitle">‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏ß‡∏Å‡πÄ‡∏£‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô</p>
            </div>

            <form id="feedbackForm">
                <!-- Rating Section -->
                <div class="rating-section">
                    <div class="section-title">
                        ‡∏Ñ‡∏∏‡∏ì‡∏û‡∏≠‡πÉ‡∏à‡∏Å‡∏±‡∏ö‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?
                    </div>
                    <div class="stars" id="starRating">
                        <span class="star" data-rating="1">‚≠ê</span>
                        <span class="star" data-rating="2">‚≠ê</span>
                        <span class="star" data-rating="3">‚≠ê</span>
                        <span class="star" data-rating="4">‚≠ê</span>
                        <span class="star" data-rating="5">‚≠ê</span>
                    </div>
                    <div class="rating-text" id="ratingText"></div>
                </div>

                <!-- Comment Section -->
                <div class="comment-section">
                    <div class="section-title">
                        ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)
                    </div>
                    <textarea
                        class="comment-textarea"
                        id="commentText"
                        placeholder="‡∏ö‡∏≠‡∏Å‡πÄ‡∏£‡∏≤‡∏´‡∏ô‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ß‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏≠‡∏ö..."
                        maxlength="500"
                    ></textarea>
                    <div class="char-count">
                        <span id="charCount">0</span>/500 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
                    </div>
                </div>

                <!-- Submit Button -->
                <button
                    type="submit"
                    class="submit-btn"
                    id="submitBtn"
                    disabled
                >
                    ‡∏™‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô
                </button>

                <!-- Success Message -->
                <div class="success-message" id="successMessage">
                    <div class="emoji">üôè</div>
                    <div>
                        <strong>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô!</strong><br />
                        ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏î‡∏µ‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô
                    </div>
                </div>
            </form>
        </div>

        <script>
            let selectedRating = 0;

            const stars = document.querySelectorAll(".star");
            const ratingText = document.getElementById("ratingText");
            const commentText = document.getElementById("commentText");
            const charCount = document.getElementById("charCount");
            const submitBtn = document.getElementById("submitBtn");
            const successMessage = document.getElementById("successMessage");
            const feedbackForm = document.getElementById("feedbackForm");

            const ratingTexts = {
                1: "üòû ‡πÑ‡∏°‡πà‡∏û‡∏≠‡πÉ‡∏à‡∏°‡∏≤‡∏Å",
                2: "üòï ‡πÑ‡∏°‡πà‡∏Ñ‡πà‡∏≠‡∏¢‡∏û‡∏≠‡πÉ‡∏à",
                3: "üòê ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á",
                4: "üòä ‡∏û‡∏≠‡πÉ‡∏à",
                5: "ü§© ‡∏û‡∏≠‡πÉ‡∏à‡∏°‡∏≤‡∏Å",
            };

            // Star rating functionality
            stars.forEach((star) => {
                star.addEventListener("click", () => {
                    selectedRating = parseInt(star.dataset.rating);
                    updateStars();
                    updateSubmitButton();
                });

                star.addEventListener("mouseenter", () => {
                    const rating = parseInt(star.dataset.rating);
                    highlightStars(rating);
                    ratingText.textContent = ratingTexts[rating];
                });
            });

            document
                .getElementById("starRating")
                .addEventListener("mouseleave", () => {
                    updateStars();
                    if (selectedRating > 0) {
                        ratingText.textContent = ratingTexts[selectedRating];
                    } else {
                        ratingText.textContent = "";
                    }
                });

            function highlightStars(rating) {
                stars.forEach((star, index) => {
                    if (index < rating) {
                        star.classList.add("active");
                    } else {
                        star.classList.remove("active");
                    }
                });
            }

            function updateStars() {
                highlightStars(selectedRating);
            }

            // Character count
            commentText.addEventListener("input", () => {
                const length = commentText.value.length;
                charCount.textContent = length;

                if (length > 450) {
                    charCount.style.color = "#ef4444";
                } else if (length > 400) {
                    charCount.style.color = "#f59e0b";
                } else {
                    charCount.style.color = "#a0aec0";
                }
            });

            // Update submit button state
            function updateSubmitButton() {
                submitBtn.disabled = selectedRating === 0;
            }

            // *** ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ Google Sheets ***
            feedbackForm.addEventListener("submit", async (e) => {
                e.preventDefault();

                if (selectedRating === 0) return;

                submitBtn.disabled = true;
                submitBtn.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...";

                const feedbackData = {
                    timestamp: new Date().toLocaleString('th-TH'),
                    rating: selectedRating,
                    ratingText: ratingTexts[selectedRating],
                    comment: commentText.value.trim(),
                    //userAgent: navigator.userAgent,
                    //pageUrl: window.location.href
                };

                try {
                    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô URL ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô Google Apps Script Web App URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzEXVRgeSnuHxrzfbBHf7VsF_1TaUKBnlrSYlxTqd5Fv0q_a4SqOsp3lfaehN0B78x0/exec';
                    
                    const response = await fetch(GOOGLE_SCRIPT_URL, {
                        method: "POST",
                        mode: 'no-cors', // ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Google Apps Script
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify(feedbackData),
                    });

                    // ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÉ‡∏ä‡πâ no-cors ‡∏à‡∏∂‡∏á‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÄ‡∏™‡∏°‡∏≠
                    // Show success message
                    feedbackForm.style.display = "none";
                    successMessage.classList.add("show");

                    // Redirect after 3 seconds
                    setTimeout(() => {
                        window.location.href = "index.html";
                    }, 3000);

                } catch (error) {
                    console.error('Error:', error);
                    alert(
                        "‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á",
                    );
                    submitBtn.disabled = false;
                    submitBtn.textContent = "‡∏™‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô";
                }
            });

            // Initialize
            updateSubmitButton();
        </script>
    </body>
</html>
